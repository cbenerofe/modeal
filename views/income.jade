doctype html
html(ng-app="myApp")
  head
    title modeal
    #link(href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css", rel="stylesheet")
    link(href="css/bootstrap.min.css", rel="stylesheet")
    link(href="css/style.css", rel="stylesheet")
    link(href="css/media.css", rel="stylesheet")
    #script(src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js")
    #script(src='https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js')
    #script(src='https://ajax.googleapis.com/ajax/libs/angularjs/1.5.8/angular.min.js')
    script(src='js/jquery.js')
    script(src='js/bootstrap.min.js')
    script(src='js/angular.js')
    script(src="data/harrison/spaces.json")
    script(src="data/harrison/leases.json")
    script(src="data/harrison/expenses.json")
    script(src="data/harrison/scenarios.json")
    script(src="data/harrison/vacancies.json")
    script(src="js/modeal.js")
    script(src="js/leases.js")
    script(src="js/scenarios.js")
    script(src="js/expenses.js")
    script(src="js/income.js")
    script(src="js/capital.js")
    script(src="js/cashflow.js")

  body(ng-controller="modealController")
    .block
      .row
        .col-xs-3
          .btn(ng-click="toggle_nets()" )
            span(ng-if="show_nets") hide nets
            span(ng-if="!show_nets") show nets
        .col-xs-3
          .btn(ng-click="toggle_psf()" )
            span(ng-if="show_psf") hide psf
            span(ng-if="!show_psf") show psf
        .col-xs-3
          select(ng-model="scenario_id")
            option(ng-repeat="s in scenarios" value="{{s.id}} ")
              | {{ s.name }}
        .col-xs-3
          | {{ scenario_id }}
          
    .block(ng-controller="incomeController")
      table.table
        thead
          tr
            th.key

            th(ng-repeat="year in years" ) 
              .btn
                | {{year.start_date.getFullYear()}}

          tr(ng-repeat="space in spaces")
            td.white.key
              .row
                .col-xs-3 {{space.id}} 
                .col-xs-8 {{space.sqft}}
                
            td(ng-repeat="year in years" ng-class="{white: ($index % 2) }")
              .block(ng-repeat="lease in get_space_leases(space.id, year.start_date.getFullYear())")
                .row
                  .col-xs-6 {{ lease.tenant }} 
                  .col-xs-6 
                    .block(ng-if="!show_nets")
                      | {{ get_lease_rent(lease,year.start_date.getFullYear(),'all') }}
                    .block(ng-if="show_nets")
                      .row
                        .col-xs-4 base
                        .col-xs-8 {{ get_lease_rent(lease,year.start_date.getFullYear(),'base') }}
                      .row
                        .col-xs-4 tax
                        .col-xs-8 {{ get_lease_rent(lease,year.start_date.getFullYear(),'retax') }}
                      .row
                        .col-xs-4 cam
                        .col-xs-8 {{ get_lease_rent(lease,year.start_date.getFullYear(),'cam') }}

          
          tr
            th.white.key total
            td(ng-repeat="year in years" ng-class="{white: ($index % 2) }") 
              | {{ get_years_rent(year.start_date.getFullYear(),'all') }}
            
            
        
